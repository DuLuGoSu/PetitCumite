<!DOCTYPE html>
<html>

<head>
  <title>Calendario de Eventos</title>
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/styles.css') }}">
</head>

<body>
  <h1>Calendario</h1>
  <h2>Bienvenido, {{ session['usuario'] }}</h2>

  <table>
    <tr>
      <th>Título</th>
      <th>Descripción</th>
      <th>Fecha</th>
      <th>Asistencia</th>
    </tr>
    {% for evento in eventos %}
    <tr class="evento-row" style="--evento-color: {{ evento.color }};">
      <td>{{ evento[1] }}</td>
      <td>{{ evento[2] }}</td>
      <td>{{ evento[3].strftime('%d/%m/%Y') }}</td>
      <td>
        {% if evento[0] in eventos_confirmados %}
        Confirmada
        {% else %}
        <form action="{{ url_for('confirmar_asistencia', id_evento=evento[0]) }}" method="post">
          <button type="submit" class="btn">Confirmar</button>
        </form>
        {% endif %}
      </td>
      <td>
        {% for usuario in usuarios_confirmados[evento[0]] %}
          {{ usuario }}, 
        {% endfor %}
      </td>
    </tr>
    {% endfor %}
  </table>
  <h2>Agregar Evento</h2>
  <form action="{{ url_for('guardar_evento') }}" method="post">
    <label for="titulo">Título del evento:</label>
    <input type="text" id="titulo" name="titulo" required>
    <br>

    <label for="descripcion">Descripción:</label>
    <textarea id="descripcion" name="descripcion" required></textarea>
    <br>

    <label for="fecha">Fecha:</label>
    <input type="date" id="fecha" name="fecha" required>
    <br>

    <label for="color">Color:</label>
    <input type="color" id="color" name="color">
    <br>

    <input type="submit" value="Guardar Evento" class="btn">
  </form>
  <div class="btn-container">
    {% if 'usuario' in session %}
    <a href="{{ url_for('logout') }}" class="btn">Cerrar sesión</a>
    {% endif %}
  </div>
</body>

</html>